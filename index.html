<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<noscript>
	<meta http-equiv="refresh" content="0; URL=/webpages/login.html" />
</noscript>

<script type="text/javascript">
//<![CDATA[
(function(){
	var web_login = "/webpages/login.html";
	var mobile_login = "/webmobile/login.html";
	
	/* redirect based on referrer */
	var web_reg = /webpages/i;
	var mobile_reg = /webmobile/i;
	var ref = document.referrer;
	if (ref) {
		if (ref.search(web_reg) >= 0) {
			//console.log("Redirect to webpage while refer is: " + ref);
			location.href = web_login;
			return;
		} else if (ref.search(mobile_reg) >= 0) {
			//console.log("Redirect to mobilepage while refer is: " + ref);
			location.href = mobile_login;
			return;
		}
	}
	
	/* redirect based on user agent */
	var detect = function(uas) {
		var is_unknow = "unknow"
		var is_tv = "desktop"
		var is_desktop = "desktop"
		var is_mobile = "mobile"
		var is_tablet = "mobile"
		
		if (uas.search(/(Tablet PC)/) >= 0) {
			return is_desktop;
		}
		if (uas.search(/(GoogleTV|AppleTV|HbbTV|Smart.?TV|SMART.TV)/) >= 0) {
			return is_tv;
		}
		if (uas.search(/(Tablet|iPad;|Kindle|Silk)/) >= 0) {
			return is_tablet;
		}
		if (uas.search(/(iPod;|iPod touch;|iPhone;|Mobile Safari|IEMobile|Windows Phone|Fennec|Opera Mini|Opera Mobi)/) >= 0) {
			return is_mobile;
		}
		if (uas.search(/(Windows NT|CrOS|Macintosh;)/) >= 0) {
			return is_desktop;
		}
		if (uas.search(/TV[^a-zA-Z]/) >= 0) {
			return is_tv;
		}
		if (uas.search(/Mobile/) >= 0) {
			return is_mobile;
		}
		if (uas.search(/Android/) >= 0) {
			if (uas.search(/Safari/) >= 0) {
				return is_tablet;
			} else {
				return is_mobile;
			}
		}
		if (uas.search(/(MIDP|Linux arm)/) >= 0) {
			return is_mobile;
		}
		if (uas.search(/(Linux|SunOS|FreeBSD|OpenBSD|NetBSD)/) >= 0) {
			return is_desktop;
		}
		return is_unknow;
	}
	var uas = navigator.userAgent;
	var device = detect(uas)
	if (device == "desktop") {
		//console.log("Redirect to webpage while user agent is: " + uas);
		location.href = web_login;
		return;
	} else if (device == "mobile") {
		//console.log("Redirect to mobile while user agent is: " + uas);
		location.href = mobile_login;
		return;
	} else {
		//console.log("Default redirect to webpage while user agent is: " + uas);
		location.href = web_login;
		return;
	}
	
})()
//]]>
</script>

</head>
</html>
